---

# Virtual Moon Approach – 3D風（WebGL2）

**1枚の月画像から、ズーム＋パン＋疑似ライティングで「月へ接近していく」映像を生成するシングルHTML。**
GPU（WebGL2）で明暗を高さマップとして擬似法線を計算し、ライト角度で陰影をつけて“立体っぽさ”を演出します。録画はブラウザ内で WebM 出力。

> **用途**：X/TikTok用の短尺映像、学習用デモ、プレゼンのBロール、#KGNINJA の月面演出素材 等

---

## デモ / 収録サンプル

* ブラウザでHTMLを開いて「デモ月」を押すと即再生できます
* 「● 録画」→「保存」で `moon_zoom_3d.webm` を出力（VP9/WEBM）

---

## ファイル構成

```
.
├─ README.md
└─ virtual_moon_approach_3_d_canvas.html   # 本体（1ファイル完結）
```

---

## クイックスタート

### 1) ローカルで開くだけ

* そのまま **ダブルクリックでOK**（画像読み込みは `<input type="file">` を使用）
* 録画（MediaRecorder）は **HTTPS か localhost** 推奨（ブラウザの仕様で制限される場合あり）

### 2) GitHub Pages で公開

1. このリポジトリを GitHub にPush
2. **Settings → Pages**

   * Branch: `main` / `/ (root)` を選択 → Save
3. 公開URLで `virtual_moon_approach_3_d_canvas.html` を開く

   * 例: `https://<yourname>.github.io/<repo>/virtual_moon_approach_3_d_canvas.html`

---

## 使い方

1. **画像を読み込む**：左端の「画像を読み込む」で任意の月面画像を指定

   * あるいは「デモ月」で手早く試す
2. **寄り先（焦点）をクリック**：キャンバス上をクリック → そこに向かって接近
3. **再生/停止/リセット**：UIのボタンで制御
4. **録画**：

   * 「● 録画」でキャンバスをキャプチャ → 終了後「保存」ボタンが出現
   * 出力は `webm(vp9)`（環境によって `video/webm` になる場合あり）

---

## パラメータ（右側スライダー）

* **時間**：アニメーション長（秒）
* **最終ズーム**：寄り量（1.2〜6.0）
* **パンX/Y**：∞字の視線移動の振幅
* **凹凸（Relief）**：陰影の強さ（明暗差→擬似高さ）の係数
* **方位（Azimuth）/ 仰角（Elevation）**：ライト（太陽光）の方向

> コツ：
>
> * 凹凸は **上げすぎるとノイジー** になるので 1.0〜2.0 から調整
> * 方位をゆっくり動かすと「金属的ではない」自然な月面陰影になる

---

## 技術メモ

* **WebGL2**（フラグメントシェーダ）で **輝度勾配→擬似法線** を生成
* `zoom + pan` によりトリミング領域を時間で移動、**高さフィット＋レターボックス**で16:9描画
* `MediaRecorder` による **キャンバス録画→Blob保存**
* 依存ライブラリ：**無し**（純粋なHTML/JS）

---

## 画像の推奨

* 高解像度の月面写真（例：満月の全体像）
* クレーターのエッジがはっきりしていると陰影が映える
* Wikimedia/NASA などの **パブリックドメイン/CC** ソースを推奨

  * 例：Full Moon 2010（Wikimedia Commons）など

> **クレジット例**：
>
> * Image © Original Author / Wikimedia Commons (License: CC BY-SA …)
> * NASA/LRO Data courtesy of NASA/GSFC/Arizona State University（※将来DEM対応時）

---

## よくある質問（FAQ）

**Q. ブラウザで録画ができません**
A. `MediaRecorder` が無効な環境やHTTP配信で制限される場合があります。**Chrome/Edge 最新版でHTTPS or localhost**を推奨。

**Q. 立体感が強すぎ/弱すぎます**
A. 「凹凸」と「ライト角度」を調整してください。素材のコントラストが低い場合は、外部で事前に**レベル補正**すると改善します。

**Q. 実際の地形で凹凸を出したい**
A. LRO（Lunar Reconnaissance Orbiter）の **DEM（標高）** を読み込んで **本物の法線** を生成する拡張を計画中（下記Roadmap）。

---

## Roadmap

* [ ] **LRO DEM 対応**（実地形の法線・パララックス）
* [ ] **カメラ曲線のGUI化**（ベジェ/Easeエディタ）
* [ ] **音付け**（環境音・BGMの合成）
* [ ] **一発エクスポート（MP4）**：FFmpeg WASM検討

---

## ライセンス

* コード：MIT（予定。お好みに合わせて変更可）
* 画像：各ソースのライセンスに従ってください

---

## 作者メモ（運用）

* 単発の演出素材を **量産→Xに投下→ポートフォリオ化** し、**BuyMeACoffee**等へ動線を作る
* テンプレとして\*\*「寄り先：名所（ティコ、コペルニクス、青い玄武岩域）」\*\*のプリセットも追加予定
* 署名例：`#KGNINJA`

---

### コントリビュート

PR歓迎：UI微調整、エフェクト（ビネット・色再現）、ショートカット、GitHub Pagesワークフロー（`pages.yml`）など。
